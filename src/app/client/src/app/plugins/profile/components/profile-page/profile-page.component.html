<div [appTelemetryImpression]="telemetryImpression" *ngIf="userProfile">
  <div class="ui grid profile-main-grid">
    <div class="three wide column center aligned white-background">
      <a class="ui blue right ribbon label ribbon-label">Basic Details</a>
      <div class="profile-image-container mt-30">
        <img class="ui small circular image" src="assets/images/user-images/{{userProfile?.userId}}.jpg"
          onerror="this.src='assets/images/user-images/default-user-icon.png'">
      </div>
      <div class="user-profession-details">
        <h3 class="ui header my-10">{{userProfile?.firstName | titlecase}} {{userProfile?.lastName | titlecase}}</h3>
        <h5 class="ui header m-0">{{convertToString(userProfile?.framework?.board)}}</h5>
      </div>
      <div class="mt-30">
        <button class="mini ui inverted primary basic button">Actions</button>
      </div>
      <div class="mt-10">
        <button appTelemetryInteract [telemetryInteractObject]="telemetryInteractObject"
          [telemetryInteractEdata]="editMobileInteractEdata" class="circular ui icon blue button mr-20 p-10" suiPopup
          popupText="+91 {{userProfile?.phone}}" *ngIf="userProfile?.phone" [popupPlacement]="'top'"
          (click)="showContactPopup=true;contactType='phone'">
          <i class="phone icon"></i>
        </button>
        <button appTelemetryInteract [telemetryInteractObject]="telemetryInteractObject" suiPopup
          [telemetryInteractEdata]="editMobileInteractEdata" class="circular ui icon blue button mr-20 p-10"
          popupText="{{resourceService?.frmelmnts?.lbl?.addPhoneNo}}" [popupPlacement]="'top'"
          *ngIf="!userProfile?.phone" (click)="showContactPopup=true;contactType='phone'">
          <i class="phone icon"></i>
        </button>
        <button appTelemetryInteract [telemetryInteractObject]="telemetryInteractObject" suiPopup
          [telemetryInteractEdata]="editEmailInteractEdata" class="circular ui icon blue button p-10"
          popupText="{{userProfile?.email}}" [popupPlacement]="'top'"
          (click)="showContactPopup=true;contactType='email'" *ngIf="userProfile?.email">
          <i class="envelope outline icon"></i>
        </button>
        <button appTelemetryInteract [telemetryInteractObject]="telemetryInteractObject" suiPopup
          [telemetryInteractEdata]="editEmailInteractEdata" class="circular ui icon blue button p-10"
          popupText="{{resourceService?.frmelmnts?.lbl?.addEmailID}}" [popupPlacement]="'top'"
          (click)="showContactPopup=true;contactType='email'" *ngIf="!userProfile?.email">
          <i class="mail icon"></i>
        </button>
      </div>
      <div>
        <div class="mb-10 text-ac profile-label-container mt-30" *ngIf="roles && roles?.length > 0">
          <span class="ui tiny label mr-5 mt-5" *ngFor="let role of roles | slice:0:showMoreRolesLimit">{{role}}</span>
        </div>
        <div *ngIf="roles?.length > defaultShowMoreRolesLimit" class="color-2 font-w-bold cursor-pointer"
          style="font-size: 11px;">
          <span tabindex="0" *ngIf="showMoreRoles" (click)="toggle(true)">+ {{roles?.length -
            defaultShowMoreRolesLimit}} {{resourceService?.frmelmnts?.lbl?.more}}
            <i class="chevron down icon"></i>
          </span>
          <span (click)="toggle(false)" *ngIf="!showMoreRoles">{{resourceService?.frmelmnts?.lbl?.showLess}}
            <i class="chevron up icon"></i>
          </span>
        </div>
      </div>
    </div>
    <div class="nine wide column mt-10">
      <div class="ui grid">
        <div class="six wide column">
          <div class="ui violet segment ml-20" style="min-height: 252px;">
            <div class="ui grid">
              <div class="six wide column">
                <label class="profile-title">{{resourceService?.frmelmnts?.lbl?.userId}}</label>
                <label class="profile-value">{{userProfile?.userName}}</label><br>
                <label class="profile-title">Position</label>
                <label class="profile-value">{{userProfile?.grade}}</label><br>
                <label class="profile-title">Job Description</label>
                <label class="profile-value">{{userProfile?.profileSummary}}</label><br>
              </div>
              <div class="six wide column">
                <label class="profile-title">{{resourceService?.frmelmnts?.lbl?.organisation}}</label>
                <label class="profile-value">{{orgDetails?.orgName}}</label><br>
                <label class="profile-title">Range</label>
                <label class="profile-value">{{userProfile?.location}}</label><br>
              </div>
            </div>
          </div>
        </div>
        <div class="six wide column">
          <div class="ui purple segment mr-20">
            <div class="ui grid">
              <div class="six wide column">
                <label class="profile-title">Degree</label>
                <label class="profile-value">{{userProfile.education[0]?.degree}}</label><br>
                <label class="profile-title">Grade</label>
                <label class="profile-value ml-15">{{userProfile.education[0]?.grade}}</label><br>
                <label class="profile-title">Institution</label>
                <label class="profile-value">{{userProfile.education[0]?.name}}</label><br>
                <label class="profile-title">Year of Passing</label>
                <label class="profile-value">{{userProfile.education[0]?.yearOfPassing}}</label><br>
              </div>
              <div class="six wide column">
                <label class="profile-title">Course Name</label>
                <label class="profile-value">{{userProfile.education[0]?.courseName}}</label><br>
                <label class="profile-title">Percentage</label>
                <label class="profile-value ml-27">{{userProfile.education[0]?.percentage}}</label><br>
                <label class="profile-title">Board / University</label>
                <label class="profile-value">{{userProfile.education[0]?.boardOrUniversity}}</label><br>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="ui grid" *ngIf="attendedTraining && attendedTraining.length > 0">
        <div class="twelve wide column">
          <div class="ui purple segment ml-20 mr-20">
            <table class="ui selectable single line table">
              <thead>
                <tr>
                  <th class="table-title">{{resourceService.frmelmnts.lbl.trainingAttended}}</th>
                  <th class="table-title">Completion Date</th>
                  <th class="center aligned table-title" *ngIf="enableCertificateFeature === 'true'">Certificate</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let data of attendedTraining">
                  <td class="table-value">
                    {{data.courseName}}
                    <!-- <span>{{data.courseName | slice:0:35}}</span>
                    <span *ngIf="data.name && data.name.length > 35">...</span> -->
                  </td>
                  <td class="table-value" *ngIf="data.completedOn">
                    {{data.completedOn | date :'dd-MMM-yyyy' }}
                  </td>
                  <td *ngIf="enableCertificateFeature === 'true'" class="center aligned">
                    <img class="cursor-pointer" src="{{'assets/images/certificate-badge.png' | cdnprefixurl}}"
                      (click)="downloadCertificate(data)" style="height: 20px;">
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <div class="ui grid" *ngIf="contributions && contributions?.length > 0">
        <div class="twelve wide column">
          <a class="ui blue ribbon label blue-ribbon-label">{{resourceService?.frmelmnts?.scttl?.contributions}}
            ({{contributions?.length}})
          </a>
          <div class="ui blue segment ml-20 mr-20">
            <div class="regular slider pt-10">
              <ngx-slick in-view-container [throttle]="[1000]" [trigger]="item"
                (afterChange)="onTelemetryEvent(contributions,$event)"
                (beforeChange)="beforeContributionSlideChange($event)" class="carousel" #slickModal="slick-modal"
                [config]="slideConfig">
                <div in-view-item [id]="i" [data]="content" ngxSlickItem
                  *ngFor="let item of contributions;let i = index;" class="slide">
                  <div>
                    <app-card (clickEvent)="onClickOfMyContributions($event)" [data]="item" [customClass]="'pr-20'"
                      class="pr-20 d-block"></app-card>
                  </div>
                </div>
              </ngx-slick>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="twelve wide column">
  <div class="ui raised segment " *ngIf="!userProfile">
    <app-loader [data]='loaderMessage'></app-loader>
  </div>
</div>
<app-popup *ngIf="showEdit" #profileModal [formInput]="inputData" [showCloseIcon]="true" [isClosable]="true"
  [buttonLabel]="resourceService?.frmelmnts?.btn?.submit" (submit)="updateProfile($event)"
  (close)="showEdit = !showEdit">
</app-popup>
<app-update-contact-details *ngIf="showContactPopup" (close)="showContactPopup = !showContactPopup"
  [contactType]="contactType"></app-update-contact-details>
<app-update-user-details (close)="showEditUserDetailsPopup = !showEditUserDetailsPopup" *ngIf="showEditUserDetailsPopup"
  [userProfile]="userProfile"></app-update-user-details>
<router-outlet></router-outlet>